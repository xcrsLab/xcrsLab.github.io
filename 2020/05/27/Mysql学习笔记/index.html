<!DOCTYPE html><html lang="zh-Hans" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Mysql学习笔记 | xcrsLab</title><meta name="description" content="Linux安装Mysql安装安装方法搜索即可，不再赘述 验证安装是否成功rpm -qa|grep -i mysql 查看是否安装过Mysqlps -ef|grep mysql  查看mysql状态cat &#x2F;etc&#x2F;passwd|grep mysql  cat &#x2F;etc&#x2F;group|grep mysql  查看用户组mysqladmin –version  查看mysql版本 启动&#x2F;停止servic"><meta name="author" content="xcr"><meta name="copyright" content="xcr"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/Diamond-Sword.png"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="dns-prefetch" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="https://fonts.googleapis.com" crossorigin="crossorigin"/><link rel="dns-prefetch" href="https://fonts.googleapis.com"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="dns-prefetch" href="//busuanzi.ibruce.info"/><meta name="twitter:card" content="summary"><meta name="twitter:title" content="Mysql学习笔记"><meta name="twitter:description" content="Linux安装Mysql安装安装方法搜索即可，不再赘述 验证安装是否成功rpm -qa|grep -i mysql 查看是否安装过Mysqlps -ef|grep mysql  查看mysql状态cat &#x2F;etc&#x2F;passwd|grep mysql  cat &#x2F;etc&#x2F;group|grep mysql  查看用户组mysqladmin –version  查看mysql版本 启动&#x2F;停止servic"><meta name="twitter:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Mysql学习笔记"><meta property="og:url" content="http://yoursite.com/2020/05/27/Mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><meta property="og:site_name" content="xcrsLab"><meta property="og:description" content="Linux安装Mysql安装安装方法搜索即可，不再赘述 验证安装是否成功rpm -qa|grep -i mysql 查看是否安装过Mysqlps -ef|grep mysql  查看mysql状态cat &#x2F;etc&#x2F;passwd|grep mysql  cat &#x2F;etc&#x2F;group|grep mysql  查看用户组mysqladmin –version  查看mysql版本 启动&#x2F;停止servic"><meta property="og:image" content="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg"><meta property="article:published_time" content="2020-05-27T14:48:53.945Z"><meta property="article:modified_time" content="2020-05-27T14:49:01.047Z"><script src="https://cdn.jsdelivr.net/npm/js-cookie/dist/js.cookie.min.js"></script><script>var autoChangeMode = '1'
var t = Cookies.get("theme")
if (autoChangeMode == '1'){
  var isDarkMode = window.matchMedia("(prefers-color-scheme: dark)").matches
  var isLightMode = window.matchMedia("(prefers-color-scheme: light)").matches
  var isNotSpecified = window.matchMedia("(prefers-color-scheme: no-preference)").matches
  var hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

  if (t === undefined){
    if (isLightMode) activateLightMode()
    else if (isDarkMode) activateDarkMode()
    else if (isNotSpecified || hasNoSupport){
      console.log('You specified no preference for a color scheme or your browser does not support it. I Schedule dark mode during night time.')
      var now = new Date()
      var hour = now.getHours()
      var isNight = hour < 6 || hour >= 18
      isNight ? activateDarkMode() : activateLightMode()
  }
  } else if (t == 'light') activateLightMode()
  else activateDarkMode()

} else if (autoChangeMode == '2'){
  now = new Date();
  hour = now.getHours();
  isNight = hour < 6 || hour >= 18
  if(t === undefined) isNight? activateDarkMode() : activateLightMode()
  else if (t === 'light') activateLightMode()
  else activateDarkMode() 
} else {
  if ( t == 'dark' ) activateDarkMode()
  else if ( t == 'light') activateLightMode()
}

function activateDarkMode(){
  document.documentElement.setAttribute('data-theme', 'dark')
  if (document.querySelector('meta[name="theme-color"]') !== null){
    document.querySelector('meta[name="theme-color"]').setAttribute('content','#000')
  }
}
function activateLightMode(){
  document.documentElement.setAttribute('data-theme', 'light')
  if (document.querySelector('meta[name="theme-color"]') !== null){
  document.querySelector('meta[name="theme-color"]').setAttribute('content','#fff')
  }
}</script><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@latest/css/font-awesome.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><link rel="canonical" href="http://yoursite.com/2020/05/27/Mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"><link rel="next" title="使用Java语言调用shell脚本重启tomcat" href="http://yoursite.com/2020/05/27/%E4%BD%BF%E7%94%A8Java%E8%AF%AD%E8%A8%80%E8%B0%83%E7%94%A8shell%E8%84%9A%E6%9C%AC%E9%87%8D%E5%90%AFtomcat/"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Titillium+Web"><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"cookieDomain":"https://xxx/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  copy: {
    success: 'Copy successfully',
    error: 'Copy error',
    noSupport: 'The browser does not support'
  },
  bookmark: {
    message_prev: 'Press',
    message_next: 'to bookmark this page'
  },
  runtime_unit: 'days',
  runtime: true,
  copyright: undefined,
  ClickShowText: undefined,
  medium_zoom: false,
  fancybox: true,
  Snackbar: undefined,
  baiduPush: false,
  highlightCopy: true,
  highlightLang: true,
  highlightShrink: 'false',
  isFontAwesomeV5: false,
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
  
}</script><script>var GLOBAL_CONFIG_SITE = { 
  isPost: true,
  isHome: false,
  isSidebar: true  
  }</script><noscript><style>
#page-header {
  opacity: 1
}
.justified-gallery img{
  opacity: 1
}
</style></noscript><meta name="generator" content="Hexo 4.2.0"></head><body><div id="mobile-sidebar"><div id="menu_mask"></div><div id="mobile-sidebar-menus"><div class="mobile_author_icon"><img class="avatar-img" src="/img/word.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="mobile_post_data"><div class="mobile_data_item is-center"><div class="mobile_data_link"><a href="/archives/"><div class="headline">Articles</div><div class="length_num">12</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div></div></div></div><i class="fa fa-arrow-right on" id="toggle-sidebar" aria-hidden="true">     </i><div id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">Catalog</div><div class="sidebar-toc__progress"><span class="progress-notice">You've read</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar">     </div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux安装Mysql"><span class="toc-number">1.</span> <span class="toc-text">Linux安装Mysql</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#安装"><span class="toc-number">1.1.</span> <span class="toc-text">安装</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#验证安装是否成功"><span class="toc-number">1.2.</span> <span class="toc-text">验证安装是否成功</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#启动-停止"><span class="toc-number">1.3.</span> <span class="toc-text">启动&#x2F;停止</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#MYSQL用户管理"><span class="toc-number">2.</span> <span class="toc-text">MYSQL用户管理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#用户管理命令"><span class="toc-number">2.1.</span> <span class="toc-text">用户管理命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#用户权限查看"><span class="toc-number">2.2.</span> <span class="toc-text">用户权限查看</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mysql权限管理"><span class="toc-number">2.3.</span> <span class="toc-text">Mysql权限管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#赋予权限"><span class="toc-number">2.3.1.</span> <span class="toc-text">赋予权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#收回权限"><span class="toc-number">2.3.2.</span> <span class="toc-text">收回权限</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Mysql架构"><span class="toc-number">3.</span> <span class="toc-text">Mysql架构</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#整体架构"><span class="toc-number">3.1.</span> <span class="toc-text">整体架构</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#连接层"><span class="toc-number">3.1.1.</span> <span class="toc-text">连接层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#服务层"><span class="toc-number">3.1.2.</span> <span class="toc-text">服务层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#引擎层"><span class="toc-number">3.1.3.</span> <span class="toc-text">引擎层</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#存储层"><span class="toc-number">3.1.4.</span> <span class="toc-text">存储层</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#show-profile"><span class="toc-number">3.2.</span> <span class="toc-text">show profile</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#开启-profile"><span class="toc-number">3.2.1.</span> <span class="toc-text">开启 profile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#使用-profile"><span class="toc-number">3.2.2.</span> <span class="toc-text">使用 profile</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#查询流程"><span class="toc-number">3.2.3.</span> <span class="toc-text">查询流程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MyISAM-和-和-InnoDB"><span class="toc-number">3.2.4.</span> <span class="toc-text">MyISAM 和 和 InnoDB</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#四、索引"><span class="toc-number">4.</span> <span class="toc-text">四、索引</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#概念"><span class="toc-number">4.1.</span> <span class="toc-text">概念</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#特点"><span class="toc-number">4.2.</span> <span class="toc-text">特点</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#优点"><span class="toc-number">4.2.1.</span> <span class="toc-text">优点</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#缺点"><span class="toc-number">4.2.2.</span> <span class="toc-text">缺点</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mysql索引"><span class="toc-number">4.3.</span> <span class="toc-text">Mysql索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#B-树（B树）"><span class="toc-number">4.3.1.</span> <span class="toc-text">B-树（B树）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#规则"><span class="toc-number">4.3.2.</span> <span class="toc-text">规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B-树-B-tree"><span class="toc-number">4.3.3.</span> <span class="toc-text">B+树(B+tree)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#规则-1"><span class="toc-number">4.3.4.</span> <span class="toc-text">规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#B树与B-树区别"><span class="toc-number">4.3.5.</span> <span class="toc-text">B树与B+树区别</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#聚簇索引和非聚簇索引"><span class="toc-number">4.4.</span> <span class="toc-text">聚簇索引和非聚簇索引</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#索引分类"><span class="toc-number">4.5.</span> <span class="toc-text">索引分类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#单值索引"><span class="toc-number">4.5.1.</span> <span class="toc-text">单值索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#唯一索引"><span class="toc-number">4.5.2.</span> <span class="toc-text">唯一索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#主键索引"><span class="toc-number">4.5.3.</span> <span class="toc-text">主键索引</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#复合索引"><span class="toc-number">4.5.4.</span> <span class="toc-text">复合索引</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#索引应用场景"><span class="toc-number">4.6.</span> <span class="toc-text">索引应用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#适合创建场景"><span class="toc-number">4.6.1.</span> <span class="toc-text">适合创建场景</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#不适合创建的场景"><span class="toc-number">4.6.2.</span> <span class="toc-text">不适合创建的场景</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Explain性能分析"><span class="toc-number">5.</span> <span class="toc-text">Explain性能分析</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#概念-1"><span class="toc-number">5.1.</span> <span class="toc-text">概念</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#id"><span class="toc-number">5.1.1.</span> <span class="toc-text">id</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#select-type"><span class="toc-number">5.1.2.</span> <span class="toc-text">select_type</span></a></li></ol></li></ol></li></ol></div></div></div><div id="body-wrap"><div class="post-bg" id="nav" style="background-image: url(https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg)"><div id="page-header"><span class="pull_left" id="blog_name"><a class="blog_title" id="site-name" href="/">xcrsLab</a></span><span class="pull_right menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> Home</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> Archives</span></a></div></div><span class="toggle-menu close"><a class="site-page"><i class="fa fa-bars fa-fw" aria-hidden="true"></i></a></span></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Mysql学习笔记</div></div><div id="post-meta"><div class="meta-firstline"><time class="post-meta__date"><span class="post-meta__date-created" title="Created 2020-05-27 22:48:53"><i class="fa fa-calendar" aria-hidden="true"></i> Created 2020-05-27</span><span class="post-meta__separator">|</span><span class="post-meta__date-updated" title="Updated 2020-05-27 22:49:01"><i class="fa fa-history" aria-hidden="true"></i> Updated 2020-05-27</span></time></div><div class="meta-secondline"> </div><div class="meta-thirdline"><span class="post-meta-pv-cv"><i class="fa fa-eye post-meta__icon" aria-hidden="true"> </i><span>Post View:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-commentcount"></span></div></div></div></div><main class="layout_post" id="content-inner"><article id="post"><div class="post-content" id="article-container"><h1 id="Linux安装Mysql"><a href="#Linux安装Mysql" class="headerlink" title="Linux安装Mysql"></a>Linux安装Mysql</h1><h2 id="安装"><a href="#安装" class="headerlink" title="安装"></a>安装</h2><p>安装方法搜索即可，不再赘述</p>
<h2 id="验证安装是否成功"><a href="#验证安装是否成功" class="headerlink" title="验证安装是否成功"></a>验证安装是否成功</h2><p>rpm -qa|grep -i mysql 查看是否安装过Mysql<br>ps -ef|grep mysql  查看mysql状态<br>cat /etc/passwd|grep mysql  cat /etc/group|grep mysql  查看用户组<br>mysqladmin –version  查看mysql版本</p>
<h2 id="启动-停止"><a href="#启动-停止" class="headerlink" title="启动/停止"></a>启动/停止</h2><p>service mysql start<br>service mysql stop</p>
<h1 id="MYSQL用户管理"><a href="#MYSQL用户管理" class="headerlink" title="MYSQL用户管理"></a>MYSQL用户管理</h1><h2 id="用户管理命令"><a href="#用户管理命令" class="headerlink" title="用户管理命令"></a>用户管理命令</h2><p>create user aaa identified by ‘123456’;   创建名称为zhang3的用户,密码设为 123123；<br>select host,user,password,select_priv,insert_priv,drop_priv from mysql.user 查看用户和权限的相关信息<br>set password =password(‘123456’) 修改当前用户的密码<br>update mysql.user set password=password(‘123456’) where user=’li4’; 修改其他用户的密码  ps:所有通过 user 表的修改必须用 flush privileges;命令才能生效<br>update mysql.user set user=’li4’ where user=’wang5’; 修改用户名 ps:所有通过 user 表的修改，必须用 flush privileges;命令才能生效<br>drop user li4  ps:不要通过 delete from user uwhere user=’li4’ 进行删除，系统会有残留信息保留。</p>
<h2 id="用户权限查看"><a href="#用户权限查看" class="headerlink" title="用户权限查看"></a>用户权限查看</h2><p>select host,user,password,select_priv,insert_priv,drop_priv from mysql.user<br>​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​<img src="https://img-blog.csdnimg.cn/2020052016145825.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NDAyNTgw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<ul>
<li>host :表示连接类型</li>
<li>% 表示所有远程通过 TCP 方式的连接</li>
<li>IP 地址 如 (192.168.1.2,127.0.0.1) 通过制定 ip 地址进行的 TCP 方式的连接</li>
<li>机器名 通过制定 i 网络中的机器名进行的 TCP 方式的连接</li>
<li>::1 IPv6 的本地 ip 地址 等同于 IPv4 的 127.0.0.1</li>
<li>localhost 本地方式通过命令行方式的连接 ，比如 mysql -u xxx -p 123xxx 方式的连接。</li>
<li>user:表示用户名 同一用户通过不同方式链接的权限是不一样的</li>
<li>password:密码 所有密码串通过 password(明文字符串) 生成的密文字符串。加密算法为 MYSQLSHA1 ，不可逆 。mysql 5.7 的密码保存到 authentication_string 字段中不再使用 password 字段。</li>
<li>权限查看 select_priv , insert_priv 等为该用户所拥有的权限。<h2 id="Mysql权限管理"><a href="#Mysql权限管理" class="headerlink" title="Mysql权限管理"></a>Mysql权限管理</h2><h3 id="赋予权限"><a href="#赋予权限" class="headerlink" title="赋予权限"></a>赋予权限</h3>命令：  grant 权限 1,权限 2,…权限 n on 数据库名称.表名称 to 用户名@用户地址 identified by‘连接口令’</li>
</ul>
<p>ps：  该权限如果发现没有该用户，则会直接新建一个用户。</p>
<p>示例：grant select,insert,delete,drop on atguigudb.* to li4@localhost ;给 li4 用户用本地命令行方式下，授予 atguigudb 这个库下的所有表的插删改查的权限。</p>
<h3 id="收回权限"><a href="#收回权限" class="headerlink" title="收回权限"></a>收回权限</h3><p>命令： show grants  查看当前用户权限<br>命令： revoke [权限 1,权限 2,…权限 n] on 库名.表名 from 用户名@用户地址 ; 收回权限命令<br>命令:    REVOKE ALL PRIVILEGES ON mysql.* FROM joe@localhost; 收回全库全表的所有权限<br>命令： REVOKE select,insert,update,delete ON mysql.* FROM joe@localhost; 收回 mysql 库下的所有表的插删改查权限<br>查看权限<br>命令：show grants; 查看当前用户权限<br>命令：select * from user ;</p>
<h1 id="Mysql架构"><a href="#Mysql架构" class="headerlink" title="Mysql架构"></a>Mysql架构</h1><h2 id="整体架构"><a href="#整体架构" class="headerlink" title="整体架构"></a>整体架构</h2><p>和其它数据库相比，MySQL 有点与众不同，它的架构可以在多种不同场景中应用并发挥良好作用。主要体现在<br>存储引擎的架构上，插件式的存储引擎架构将查询处理和其它的系统任务以及数据的存储提取相分离。这种架构可<br>以根据业务的需求和实际需要选择合适的存储引擎。</p>
<h3 id="连接层"><a href="#连接层" class="headerlink" title="连接层"></a>连接层</h3><p>最上层是一些客户端和连接服务，包含本地 sock 通信和大多数基于客户端/服务端工具实现的类似于 tcp/ip 的<br>通信。主要完成一些类似于连接处理、授权认证、及相关的安全方案。在该层上引入了线程池的概念，为通过认证<br>安全接入的客户端提供线程。同样在该层上可以实现基于 SSL 的安全链接。服务器也会为安全接入的每个客户端验<br>证它所具有的操作权限。</p>
<h3 id="服务层"><a href="#服务层" class="headerlink" title="服务层"></a>服务层</h3><p>Management Serveices &amp; Utilities 系统管理和控制工具<br>SQL Interface: SQL 接口。接受用户的 SQL 命令，并且返回用户需要查询的结果。比如 select from 就是调用 SQL Interface<br>Parser 解析器。 SQL 命令传递到解析器的时候会被解析器验证和解析<br>Optimizer 查询优化器。 SQL 语句在查询之前会使用查询优化器对查询进行优化，比如有where 条件时，优化器来决定先投影还是先过滤。<br>Cache 和 Buffer 查询缓存。如果查询缓存有命中的查询结果，查询语句就可以直接去查询缓存中取数据。这个缓存机制是由一系列小缓存组成的。比如表缓存，记录缓存，key 缓存，权限缓存等</p>
<h3 id="引擎层"><a href="#引擎层" class="headerlink" title="引擎层"></a>引擎层</h3><pre><code>存储引擎层，存储引擎真正的负责了 MySQL 中数据的存储和提取，服务器通过 API 与存储引擎进行通信。不同</code></pre><p>的存储引擎具有的功能不同，这样我们可以根据自己的实际需要进行选取。</p>
<h3 id="存储层"><a href="#存储层" class="headerlink" title="存储层"></a>存储层</h3><pre><code>数据存储层，主要是将数据存储在运行于裸设备的文件系统之上，并完成与存储引擎的交互。</code></pre><h2 id="show-profile"><a href="#show-profile" class="headerlink" title="show profile"></a>show profile</h2><pre><code>利用 show profile 可以查看 sql 的执行周期！</code></pre><h3 id="开启-profile"><a href="#开启-profile" class="headerlink" title="开启 profile"></a>开启 profile</h3><p>show variables like ‘%profiling%’;<br><img src="https://img-blog.csdnimg.cn/20200520161537388.png" alt="在这里插入图片描述"><br>如果没有开启，可以执行 set profiling=1 开启<br><img src="https://img-blog.csdnimg.cn/20200520161600594.png" alt="在这里插入图片描述"></p>
<h3 id="使用-profile"><a href="#使用-profile" class="headerlink" title="使用 profile"></a>使用 profile</h3><p>执行 show prifiles 命令，可以查看最近的几次查询。<br><img src="https://img-blog.csdnimg.cn/20200520161637451.png" alt="在这里插入图片描述"><br>根据 Query_ID,可以进一步执行 show profile cpu,block io for query Query_id 来查看 sql 的具体执行步骤。<br><img src="https://img-blog.csdnimg.cn/20200520161658300.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NDAyNTgw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="查询流程"><a href="#查询流程" class="headerlink" title="查询流程"></a>查询流程</h3><p>mysql 的查询流程大致是：<br>       mysql 客户端通过协议与 mysql 服务器建连接，发送查询语句，先检查查询缓存，如果命中，直接返回结果，<br>否则进行语句解析,也就是说，在解析查询之前，服务器会先访问查询缓存(query cache)——它存储 SELECT 语句以及<br>相应的查询结果集。如果某个查询结果已经位于缓存中，服务器就不会再对查询进行解析、优化、以及执行。它仅<br>仅将缓存中的结果返回给用户即可，这将大大提高系统的性能。<br>       语法解析器和预处理：首先 mysql 通过关键字将 SQL 语句进行解析，并生成一颗对应的“解析树”。mysql 解析<br>器将使用 mysql 语法规则验证和解析查询；预处理器则根据一些 mysql 规则进一步检查解析数是否合法。<br>       查询优化器当解析树被认为是合法的了，并且由优化器将其转化成执行计划。一条查询可以有很多种执行方式，<br>最后都返回相同的结果。优化器的作用就是找到这其中最好的执行计划。<br>       然后，mysql 默认使用的 BTREE 索引，并且一个大致方向是:无论怎么折腾 sql，至少在目前来说，mysql 最多只<br>用到表中的一个索引。</p>
<h3 id="MyISAM-和-和-InnoDB"><a href="#MyISAM-和-和-InnoDB" class="headerlink" title="MyISAM 和 和 InnoDB"></a>MyISAM 和 和 InnoDB</h3><p><img src="https://img-blog.csdnimg.cn/20200520161733769.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NDAyNTgw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>InnoDB</strong>：支持事务处理，支持外键，支持崩溃修复能力和并发控制。如果需要对事务的完整性要求比较高（比如银行），要求实现并发控制（比如售票），那选择InnoDB有很大的优势。如果需要频繁的更新、删除操作的数据库，也可以选择InnoDB，因为支持事务的提交（commit）和回滚（rollback）。</p>
<p><strong>MyISAM</strong>：插入数据快，空间和内存使用比较低。如果表主要是用于插入新记录和读出记录，那么选择MyISAM能实现处理高效率。如果应用的完整性、并发性要求比较低，也可以使用。</p>
<p>注意，同一个数据库也可以使用多种存储引擎的表。如果一个表要求比较高的事务处理，可以选择InnoDB。这个数据库中可以将查询要求比较高的表选择MyISAM存储。如果该数据库需要一个用于查询的临时表，可以选择MEMORY存储引擎。</p>
<h1 id="四、索引"><a href="#四、索引" class="headerlink" title="四、索引"></a>四、索引</h1><h2 id="概念"><a href="#概念" class="headerlink" title="概念"></a>概念</h2><p><strong>索引</strong>（Index）是帮助 MySQL 高效获取数据的数据结构。可以得到索引的本质： <strong>索引是数据结构</strong>。可以简单理解为<strong>排好序的快速查找数据结构</strong><br><img src="https://img-blog.csdnimg.cn/20200520162050195.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NDAyNTgw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>左边是数据表，一共有两列七条记录，最左边的是数据记录的物理地址。为了加快 Col2 的查找，可以维护一个 右边所示的二叉查找树，每个节点分别包含索引键值和一个指向对应数据记录物理地址的指 针，这样就可以运用 二叉查找在一定的复杂度内获取到相应数据，从而快速的检索出符合条件的记录。</p>
<h2 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h2><h3 id="优点"><a href="#优点" class="headerlink" title="优点"></a>优点</h3><ul>
<li>提高数据检索的效率，降低数据库的IO成本</li>
<li>通过索引列对数据进行排序，降低数据排序的成本，降低了CPU的消耗。<h3 id="缺点"><a href="#缺点" class="headerlink" title="缺点"></a>缺点</h3></li>
<li>虽然索引大大提高了查询速度，同时却会降低更新表的速度，如对表进行INSERT、UPDATE和DELETE。因为 更新表时，MySQL不仅要保存数据，还要保存一下索引文件每次更新添加了索引列的字段，都会调整因为 更新所带来的键值变化后的索引信息</li>
<li>实际上索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录，所以索引列也是要占用空间的<h2 id="Mysql索引"><a href="#Mysql索引" class="headerlink" title="Mysql索引"></a>Mysql索引</h2><h3 id="B-树（B树）"><a href="#B-树（B树）" class="headerlink" title="B-树（B树）"></a>B-树（B树）</h3>B树属于多叉树又名平衡多路查找树<h3 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h3>（1）排序方式：所有节点关键字是按递增次序排列，并遵循左小右大原则；</li>
</ul>
<p>（2）子节点数：非叶节点的子节点数&gt;1，且&lt;=M ，且M&gt;=2，空树除外（注：M阶代表一个树节点最多有多少个查找路径，M=M路,当M=2则是2叉树,M=3则是3叉）；</p>
<p>（3）关键字数：枝节点的关键字数量大于等于ceil(m/2)-1个且小于等于M-1个（注：ceil()是个朝正无穷方向取整的函数 如ceil(1.1)结果为2);</p>
<p>（4）所有叶子节点均在同一层、叶子节点除了包含了关键字和关键字记录的指针外也有指向其子节点的指针只不过其指针地址都为null对应下图最后一层节点的空格子;<br><img src="https://img-blog.csdnimg.cn/2020052016323075.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NDAyNTgw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br>3 层的 b+树可以表示上百万的数据，如果上百万的数据查找只需要三次 IO，性能提高将是巨大的， 如果没有索引，每个数据项都要发生一次 IO，那么总共需要百万次的 IO，显然成本非常非常高</p>
<h3 id="B-树-B-tree"><a href="#B-树-B-tree" class="headerlink" title="B+树(B+tree)"></a>B+树(B+tree)</h3><p>相对于B树来说B+树更充分的利用了节点的空间，让查询速度更加稳定，其速度完全接近于二分法查找</p>
<h3 id="规则-1"><a href="#规则-1" class="headerlink" title="规则"></a>规则</h3><p>（1）B+跟B树不同B+树的非叶子节点不保存关键字记录的指针，只进行数据索引，这样使得B+树每个非叶子节点所能保存的关键字大大增加；</p>
<p>（2）B+树叶子节点保存了父节点的所有关键字记录的指针，所有数据地址必须要到叶子节点才能获取到。所以每次数据查询的次数都一样；</p>
<p>（3）B+树叶子节点的关键字从小到大有序排列，左边结尾数据都会保存右边节点开始数据的指针。</p>
<p>（4）非叶子节点的子节点数=关键字数（来源百度百科）（根据各种资料 这里有两种算法的实现方式，另一种为非叶节点的关键字数=子节点数-1（来源维基百科)，虽然他们数据排列结构不一样，但其原理还是一样的Mysql 的B+树是用第一种方式实现）;<br><img src="https://img-blog.csdnimg.cn/20200520163640981.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NDAyNTgw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></p>
<h3 id="B树与B-树区别"><a href="#B树与B-树区别" class="headerlink" title="B树与B+树区别"></a>B树与B+树区别</h3><ol>
<li>B-树的关键字和记录是放在一起的，叶子节点可以看作外部节点，不包含任何信息；B+树的非叶子节点中只 有关键字和指向下一个节点的索引，记录只放在叶子节点中</li>
<li>在 B-树中，越靠近根节点的记录查找时间越快，只要找到关键字即可确定记录的存在；而 B+树中每个记录 的查找时间基本是一样的，都需要从根节点走到叶子节点，而且在叶子节点中还要再比较关键字。从这个角度看 B- 树的性能好像要比 B+树好，而在实际应用中却是 B+树的性能要好些。因为 B+树的非叶子节点不存放实际的数据， 这样每个节点可容纳的元素个数比 B-树多，树高比 B-树小，这样带来的好处是减少磁盘访问次数。尽管 B+树找到 一个记录所需的比较次数要比 B-树多，但是一次磁盘访问的时间相当于成百上千次内存比较的时间，因此实际中 B+树的性能可能还会好些，而且 B+树的叶子节点使用指针连接在一起，方便顺序遍历（例如查看一个目录下的所有 文件，一个表中的所有记录等），这也是很多数据库和文件系统使用 B+树的缘故。 </li>
</ol>
<p><strong>为什么说 B+树比 B-树更适合实际应用中操作系统的文件索引和数据库索引？</strong></p>
<ol>
<li>B+树的磁盘读写代价更低 B+树的内部结点并没有指向关键字具体信息的指针。因此其内部结点相对 B 树更小。如果把所有同一内部结点 的关键字存放在同一盘块中，那么盘块所能容纳的关键字数量也越多。一次性读入内存中的需要查找的关键字也就 越多。相对来说 IO 读写次数也就降低了。</li>
<li>B+树的查询效率更加稳定 由于非终结点并不是最终指向文件内容的结点，而只是叶子结点中关键字的索引。所以任何关键字的查找必须 走一条从根结点到叶子结点的路。所有关键字查询的路径长度相同，导致每一个数据的查询效率相当。</li>
</ol>
<h2 id="聚簇索引和非聚簇索引"><a href="#聚簇索引和非聚簇索引" class="headerlink" title="聚簇索引和非聚簇索引"></a>聚簇索引和非聚簇索引</h2><p><img src="https://img-blog.csdnimg.cn/20200520164146479.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NDAyNTgw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"><br><strong>聚簇索引优点</strong><br>按照聚簇索引排列顺序，查询显示一定范围数据的时候，由于数据都是紧密相连，数据库不不用从多 个数据块中提取数据，所以节省了大量的 io 操作<br><strong>聚簇索引的限制</strong><br>对于 mysql 数据库目前只有 innodb 数据引擎支持聚簇索引，而 Myisam 并不支持聚簇索引。 由于数据物理存储排序方式只能有一种，所以每个 Mysql 的表只能有一个聚簇索引。一般情况下就是 该表的主键。 为了充分利用聚簇索引的聚簇的特性，所以 innodb 表的主键列尽量选用有序的顺序 id，而不建议用 无序的 id，比如 uuid 这种</p>
<h2 id="索引分类"><a href="#索引分类" class="headerlink" title="索引分类"></a>索引分类</h2><h3 id="单值索引"><a href="#单值索引" class="headerlink" title="单值索引"></a>单值索引</h3><p>一个索引只包含单个列，一个表可以有多个单列索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//随表创建</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customer (</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> AUTO_INCREMENT ,</span><br><span class="line">	customer_no <span class="built_in">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line">	customer_name <span class="built_in">VARCHAR</span>(<span class="number">200</span>), </span><br><span class="line">	PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>), <span class="keyword">KEY</span> (customer_name) </span><br><span class="line">);</span><br><span class="line">//单独创建</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> idx_customer_name <span class="keyword">ON</span> customer(customer_name);</span><br></pre></td></tr></table></figure>
<h3 id="唯一索引"><a href="#唯一索引" class="headerlink" title="唯一索引"></a>唯一索引</h3><p>索引列的值必须唯一，但允许有空值</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">//随表创建</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customer (</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> AUTO_INCREMENT ,</span><br><span class="line">	customer_no <span class="built_in">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line">	customer_name <span class="built_in">VARCHAR</span>(<span class="number">200</span>), </span><br><span class="line">	PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>), <span class="keyword">KEY</span> (customer_name), <span class="keyword">UNIQUE</span> (customer_no) </span><br><span class="line">);</span><br><span class="line">//单独建立</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">UNIQUE</span> <span class="keyword">INDEX</span> idx_customer_no <span class="keyword">ON</span> customer(customer_no);</span><br></pre></td></tr></table></figure>
<h3 id="主键索引"><a href="#主键索引" class="headerlink" title="主键索引"></a>主键索引</h3><p>设定为主键后数据库会自动建立索引，innodb为聚簇索引</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//随表创建</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customer (</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> AUTO_INCREMENT ,</span><br><span class="line">	customer_no <span class="built_in">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line">	customer_name <span class="built_in">VARCHAR</span>(<span class="number">200</span>), </span><br><span class="line">	PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>) </span><br><span class="line">);</span><br><span class="line">//单独创建</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> customer <span class="keyword">add</span> PRIMARY <span class="keyword">KEY</span> customer(customer_no);</span><br><span class="line">//删除索引</span><br><span class="line"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> customer <span class="keyword">drop</span> PRIMARY <span class="keyword">KEY</span> ;</span><br></pre></td></tr></table></figure>
<h3 id="复合索引"><a href="#复合索引" class="headerlink" title="复合索引"></a>复合索引</h3><p>一个索引包含多个列</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//随表创建</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> customer (</span><br><span class="line">	<span class="keyword">id</span> <span class="built_in">INT</span>(<span class="number">10</span>) <span class="keyword">UNSIGNED</span> AUTO_INCREMENT ,</span><br><span class="line">	customer_no <span class="built_in">VARCHAR</span>(<span class="number">200</span>),</span><br><span class="line">	customer_name <span class="built_in">VARCHAR</span>(<span class="number">200</span>), </span><br><span class="line">	PRIMARY <span class="keyword">KEY</span>(<span class="keyword">id</span>), </span><br><span class="line">	<span class="keyword">KEY</span> (customer_name), </span><br><span class="line">	<span class="keyword">UNIQUE</span> (customer_name), </span><br><span class="line">	<span class="keyword">KEY</span> (customer_no,customer_name) </span><br><span class="line">);</span><br><span class="line">//单独创建</span><br><span class="line"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> idx_no_name <span class="keyword">ON</span> customer(customer_no,customer_name);</span><br></pre></td></tr></table></figure>
<h2 id="索引应用场景"><a href="#索引应用场景" class="headerlink" title="索引应用场景"></a>索引应用场景</h2><h3 id="适合创建场景"><a href="#适合创建场景" class="headerlink" title="适合创建场景"></a>适合创建场景</h3><ol>
<li>主键自动建立唯一索引； </li>
<li>频繁作为查询条件的字段应该创建索引 </li>
<li>查询中与其它表关联的字段，外键关系建立索引 </li>
<li>单键/组合索引的选择问题， 组合索引性价比更高 </li>
<li>查询中排序的字段，排序字段若通过索引去访问将大大提高排序速度 </li>
<li>查询中统计或者分组字段<h3 id="不适合创建的场景"><a href="#不适合创建的场景" class="headerlink" title="不适合创建的场景"></a>不适合创建的场景</h3></li>
<li>表记录太少 </li>
<li>经常增删改的表或者字段</li>
<li>Where 条件里用不到的字段不创建索引 </li>
<li>过滤性不好的不适合建索引<h1 id="Explain性能分析"><a href="#Explain性能分析" class="headerlink" title="Explain性能分析"></a>Explain性能分析</h1><h2 id="概念-1"><a href="#概念-1" class="headerlink" title="概念"></a>概念</h2>使用 EXPLAIN 关键字可以模拟优化器执行 SQL 查询语句，从而知道 MySQL 是如何处理你的 SQL 语句的。分 析你的查询语句或是表结构的性能瓶颈。<br><img src="https://img-blog.csdnimg.cn/20200520165601328.png" alt="在这里插入图片描述"><h3 id="id"><a href="#id" class="headerlink" title="id"></a>id</h3>表示查询中执行 select 子句或操作表的顺序</li>
<li>id 相同，执行顺序由上至下<img src="https://img-blog.csdnimg.cn/20200520165731469.png" alt="在这里插入图片描述"></li>
<li>id 不同，如果是子查询，id 的序号会递增，id 值越大优先级越高，越先被执行<img src="https://img-blog.csdnimg.cn/20200520165815825.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NDAyNTgw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li>
<li>有相同也有不同,id 如果相同，可以认为是一组，从上往下顺序执行；在所有组中，id 值越大，优先级越高，越先执行衍生 = DERIVED<img src="https://img-blog.csdnimg.cn/20200520165915293.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L3FxXzM1NDAyNTgw,size_16,color_FFFFFF,t_70" alt="在这里插入图片描述"></li>
</ol>
<p><strong>id 号每个号码，表示一趟独立的查询。一个 sql 的查询趟数越少越好</strong></p>
<h3 id="select-type"><a href="#select-type" class="headerlink" title="select_type"></a>select_type</h3></div><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">Author: </span><span class="post-copyright-info"><a href="mailto:undefined">xcr</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">Link: </span><span class="post-copyright-info"><a href="http://yoursite.com/2020/05/27/Mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">http://yoursite.com/2020/05/27/Mysql%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">Copyright Notice: </span><span class="post-copyright-info">All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> unless stating additionally.</span></div></div><div class="tag_share"><div class="post-meta__tag-list"></div><div class="post_share"><div class="social-share" data-image="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css"/><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-button button--primary button--animated"> <i class="fa fa-qrcode"></i> Donate<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="post-qr-code__img" src="/img/wechat.jpg" alt="微信"/><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="post-qr-code__img" src="/img/alipay.jpg" alt="支付寶"/><div class="post-qr-code__desc">支付寶</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="next-post pull-full"><a href="/2020/05/27/%E4%BD%BF%E7%94%A8Java%E8%AF%AD%E8%A8%80%E8%B0%83%E7%94%A8shell%E8%84%9A%E6%9C%AC%E9%87%8D%E5%90%AFtomcat/"><img class="next_cover" src="https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="pagination-info"><div class="label">Next Post</div><div class="next_info">使用Java语言调用shell脚本重启tomcat</div></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i><span> Comment</span></div><div class="vcomment" id="vcomment"></div><script src="https://cdn.jsdelivr.net/npm/valine/dist/Valine.min.js"></script><script>var requestSetting = function (from,set) {
  var from = from
  var setting = set.split(',').filter(function(item){
  return from.indexOf(item) > -1
  });
  setting = setting.length == 0 ? from :setting;
  return setting
}

var guestInfo = requestSetting(['nick','mail','link'],'nick,mail,link')
var requiredFields = requestSetting(['nick','mail','link'],'nick,mail')

window.valine = new Valine({
  el:'#vcomment',
  appId: 'VJOs4EVRhHLbfnfAm9ezhk2c-gzGzoHsz',
  appKey: 'hQrvQk5qQ0QfLhow1uxyhcub',
  notify: false,
  verify: false,
  placeholder: 'Please leave your footprints',
  avatar: 'monsterid',
  meta: guestInfo,
  pageSize: '10',
  lang: 'en',
  recordIP: false,
  serverURLs: '',
  emojiCDN: '',
  emojiMaps: "",
  enableQQ: false,
  requiredFields: requiredFields
});</script></div></article></main><footer id="footer" data-type="color"><div id="footer-wrap"><div class="copyright">&copy;2017 - 2020 By xcr</div><div class="framework-info"><span>Driven </span><a href="https://hexo.io" target="_blank" rel="noopener"><span>Hexo</span></a><span class="footer-separator">|</span><span>Theme </span><a href="https://github.com/jerryc127/hexo-theme-butterfly" target="_blank" rel="noopener"><span>Butterfly</span></a></div></div></footer></div><section class="rightside" id="rightside"><div id="rightside-config-hide"><i class="fa fa-book" id="readmode" title="Read Mode"></i><i class="fa fa-plus" id="font_plus" title="Increase font size"></i><i class="fa fa-minus" id="font_minus" title="Decrease font size"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="Traditional Chinese and Simplified Chinese Conversion" target="_self">繁</a><i class="darkmode fa fa-moon-o" id="darkmode" title="Dark Mode"></i></div><div id="rightside-config-show"><div id="rightside_config" title="Setting"><i class="fa fa-cog" aria-hidden="true"></i></div><a id="to_comment" href="#post-comment" title="Scroll to comment"><i class="scroll_to_comment fa fa-comments">  </i></a><i class="fa fa-list-ul close" id="mobile-toc-button" title="Table of Contents" aria-hidden="true"></i><i class="fa fa-arrow-up" id="go-up" title="Back to top" aria-hidden="true"></i></div></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script><script src="https://cdn.jsdelivr.net/npm/instant.page@3/instantpage.min.js" type="module"></script></body></html>